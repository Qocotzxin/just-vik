<section class="products-form">
  <h1>Agregar Producto</h1>
  <form (ngSubmit)="onSubmit(formDirective)" [formGroup]="form" #formDirective="ngForm">
    <div>
      <mat-form-field appearance="outline">
        <mat-label>Nombre</mat-label>
        <input matInput placeholder="Ej.: Anti stress" formControlName="name">
        <mat-error *ngIf="form.invalid">Campo requerido. MÃ­nimo 3 caracteres.</mat-error>
      </mat-form-field>

      <mat-form-field appearance="outline">
        <mat-label>Stock</mat-label>
        <input matInput formControlName="stock">
        <mat-error *ngIf="form.invalid">Campo requerido.</mat-error>
      </mat-form-field>

      <mat-form-field appearance="outline">
        <mat-label>Precio Unitario Neto</mat-label>
        <input matInput type="number" formControlName="unitPrice">
        <mat-icon matSuffix>attach_money</mat-icon>
        <mat-error *ngIf="form.invalid">Campo requerido.</mat-error>
      </mat-form-field>

      <mat-form-field appearance="outline">
        <mat-label>Costos de Transporte</mat-label>
        <input matInput type="number" formControlName="transportCost">
        <mat-icon matSuffix>attach_money</mat-icon>
        <mat-error *ngIf="form.invalid">Campo requerido.</mat-error>
      </mat-form-field>

      <mat-form-field appearance="outline">
        <mat-label>IVA (%)</mat-label>
        <input matInput type="number" formControlName="taxes">
      </mat-form-field>

      <mat-form-field appearance="outline">
        <mat-label>Otros Impuestos (%)</mat-label>
        <input matInput type="number" formControlName="otherTaxes">
      </mat-form-field>

      <mat-form-field appearance="outline">
        <mat-label>Precio Unitario Bruto</mat-label>
        <input matInput type="number" formControlName="grossUnitPrice">
        <mat-icon matSuffix>attach_money</mat-icon>
        <mat-error *ngIf="form.invalid">Campo requerido.</mat-error>
        <mat-hint align="start">
          <strong>Precio Unitario Neto + {{form.get('taxes')!.value}}% de IVA + Otros Impuestos (%) + Costo de
            Transporte</strong>
        </mat-hint>
      </mat-form-field>

      <mat-form-field appearance="outline">
        <mat-label>Ganancia esperada (%)</mat-label>
        <input matInput type="number" formControlName="expectedProfitPercentage">
        <mat-error *ngIf="form.invalid">Campo requerido.</mat-error>
        <mat-hint align="start">
          <strong>Porcentaje que se espera ganar con la venta del producto.</strong>
        </mat-hint>
      </mat-form-field>

      <mat-form-field appearance="outline">
        <mat-label>Precio Unitario de Venta</mat-label>
        <input matInput type="number" formControlName="salesUnitPrice">
        <mat-icon matSuffix>attach_money</mat-icon>
        <mat-error *ngIf="form.invalid">Campo requerido.</mat-error>
      </mat-form-field>

      <mat-form-field appearance="outline">
        <mat-label>Ganancia por Unidad</mat-label>
        <input matInput type="number" formControlName="estimatedProfit">
        <mat-icon matSuffix>attach_money</mat-icon>
        <mat-hint align="start">
          <strong>Precio Unitario de Venta - Precio Unitario Bruto</strong>
        </mat-hint>
      </mat-form-field>

    </div>
    <button mat-raised-button color="primary" type="submit" [disabled]="!form.valid">
      <mat-spinner *ngIf="loading; else btnText" [diameter]="36" color="accent"></mat-spinner>
      <ng-template #btnText>
        {{ buttonAction }}
      </ng-template>
    </button>
  </form>

</section>
